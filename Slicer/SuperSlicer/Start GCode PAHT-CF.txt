; ENDER-3 PRO CUSTOM START GCODE
; eSun PAHT-CF

; I N I T I A L I Z I N G
M300 S260 P100 ; Chirp
G21 ; Set units to millimeters
G92 E0 ; Reset extruder
	; R E S E T  S P E E D  A N D  E X T R U S I O N  R A T E S
M200 D0 ; Disable volumetric e
M220 S100 ; Reset speed
M221 S100 ; Reset extrusion rate
M117 Initializing
	; S E T  S T E P  E X T R U D E R
M92 E391.51524 ; Set step extruder per-mm
	; L I N E A R  A D V A N C E
M900 K0.00 ; Adjust linear advance K=n
	; S E T  P O S I T I O N I N G  M O D E S
G90 ; Use absolute positioning
M83 ; Extruder relative positioning

; S T A R T  T E M P E R A T U R E
M300 S260 P100 ; Chirp
M117 Start Heating
M140 S[first_layer_bed_temperature] ; Start heating "BED" temperature
M104 S150 ; Start heating "EXTRUDER"
M190 S[first_layer_bed_temperature] ; Wait for "BED" to reach temp before proceeding
M109 S150 ; Wait for "EXTRUDER" to reach temp before proceeding

; A L I G N  &  H O M I N G
M300 S260 P100 ; Chirp
M117 Homing & Auto-Align
;G28 ; Home all axes
G34 I3 T0.01 ; Z axes auto align + home all axes

; B E D  L E V E L
M300 S260 P100 ; Chirp
M117 Initialize Bed Level
;G29 L0 ; Load mesh from 60C:0, 80C;1, 100C:2
;G29 F 20 ; Fade height (default F 10)
;G29 J3 ; Probe (J:3, J2:4, J3:9) points and tilt the mesh according to what it finds
;G29 A ; Active mesh level
G29 D ; Deactivate mesh

; P R I M E  P O S I T I O N
M300 S260 P100 ; Chirp
M117 Move to Prime Position
G1 X95 Y-5 F10000 ; Move to prime position
G1 Z10 F420 ; Move Z axis

; S T A R T  F I N A L  T E M P E R A T U R E
M300 S260 P100 ; Chirp
M117 Set Final Temp
M104 S{first_layer_temperature[initial_extruder]+extruder_temperature_offset[initial_extruder]} ; Start heating "EXTRUDER"
M109 S{first_layer_temperature[initial_extruder]+extruder_temperature_offset[initial_extruder]} ; Wait for "EXTRUDER" to reach temp before proceeding

; S T A R T  L I N E
M300 S260 P100 ; Chirp
M117 Start Line
G1 Z0.28 F120 ; Z position
G92 E0 ; Reset extruder
G1 E0.6 F1800 ; Purge first
G1 X0 E9 F1800.0 ; Prime line
G1 E-1 F1800 ; Retract
	; W I P E
G91 ; Use relative positioning
G1 X0.5 Y-0.5 F3000 ; -0.5 wipe action
G1 X-0.5 Y0.5 F3000 ; 0.5 wipe action
	; S E T  P O S I T I O N I N G  M O D E S
G90 ; Use absolute positioning
M83 ; Extruder relative positioning
G1 X-5 F1000 ; Blank line

; F I N A L  P R I N T  A D J U S T M E N T S
G92 E0 ; Reset extruder
M117 Print in progress